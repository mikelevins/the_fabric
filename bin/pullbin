#!/bin/sh

export thisdir="`dirname \"$0\"`"
export PROJECT_HOME="`( cd \"$thisdir/../..\" && pwd )`"
export LOCAL_ASSETS="${PROJECT_HOME}/the_fabric_assets"
export LOCAL_LIBS="${PROJECT_HOME}/the_fabric_libraries"

echo
echo "Making sure local directories exist..."
echo "Ensuring ${LOCAL_ASSETS}..."
mkdir -p ${LOCAL_ASSETS}
echo "Ensuring ${LOCAL_LIBS}..."
mkdir -p ${LOCAL_LIBS}

export REMOTE_LIBS="explorersguild.com:/var/www/xg/fabric/jar/"
export REMOTE_ASSETS="explorersguild.com:/var/www/xg/fabric/assets/"

echo  "fetching assets..."
rsync -avz -e "ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null" --progress ${REMOTE_ASSETS} ${PROJECT_HOME}

echo  "fetching libraries..."
rsync -avz -e "ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null" --progress ${REMOTE_LIBS} ${PROJECT_HOME}

echo
echo "...done."
echo
